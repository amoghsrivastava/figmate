<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@600&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Epilogue:ital,wght@0,100..900;1,100..900&display=swap"
  rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@200..800&display=swap" rel="stylesheet">
<link
  href="https://fonts.googleapis.com/css2?family=Archivo:ital,wght@0,100..900;1,100..900&family=Fraunces:ital,opsz,wght@0,9..144,100..900;1,9..144,100..900&display=swap"
  rel="stylesheet">


<style>
  /* :root {
    --background-color: rgb(27, 27, 27);

    --text-primary: rgba(255, 255, 255, 1);
    --text-primary-hover: rgba(255, 255, 255, 0.5);

    --text-primary-oncolor: rgba(32, 32, 32, 1);

    --text-secondary: rgba(255, 255, 255, 0.5);
    --text-secondary-hover: rgba(255, 255, 255, 0.8);


    --divider-color: rgba(255, 255, 255, 0.10);

    --border-default: rgba(102, 102, 102, 0.1);
    --border-hover: rgba(255, 255, 255, 0.15);

    --tab-default: rgba(255, 255, 255, 0.04);
    --tab-hover: rgba(255, 255, 255, 0.08);
    --tab-active: rgba(255, 255, 255, 1);

    --tag-default: rgba(255, 255, 255, 0.08);

    --option-default: rgba(255, 255, 255, 0.04);
    --option-hover: rgba(255, 255, 255, 0.08);
    --option-active: rgba(255, 255, 255, 0.1);

    --loader-fill: rgba(255, 255, 255, 0.20);
  } */

  /* Consolidated theme variables */
  :root {
    /* Common variables */
    --transition-fast: all 0.1s;
    --transition-medium: all 0.2s;
    --transition-slow: all 0.3s;
    --border-radius-sm: 8px;
    --border-radius-md: 12px;
    --border-radius-lg: 14px;
    --border-radius-xl: 1000px;
    
    /* Font sizes */
    --font-size-xs: 9px;      /* Small text, tags */
    --font-size-sm: 11px;     /* Body text, form fields */
    --font-size-md: 14px;     /* Headings */
    --font-size-lg: 20px;     /* Title */
    --font-size-xl: 24px;     /* Echo text */
  }

  html[class='figma-light'] {
    --background-color: rgb(243, 243, 243);
    --text-primary: rgb(32, 32, 32);
    --text-primary-hover: rgba(32, 32, 32, 0.5);
    --text-primary-oncolor: rgba(255, 255, 255, 1);
    --text-secondary: rgba(32, 32, 32, 0.6);
    --text-secondary-hover: rgba(32, 32, 32, 0.9);
    --divider-color: rgba(32, 32, 32, 0.10);
    --border-default: rgba(32, 32, 32, 0.08);
    --border-hover: rgba(32, 32, 32, 0.15);
    --tab-default: rgba(255, 255, 255, 0.9);
    --tab-hover: rgba(255, 255, 255, 0.5);
    --tab-active: rgb(32, 32, 32);
    --tag-default: rgba(32, 32, 32, 0.07);
    --option-default: rgba(255, 255, 255, 0.9);
    --option-hover: rgba(255, 255, 255, 0.5);
    --option-active: rgba(32, 32, 32, 0.1);
    --loader-fill: rgba(32, 32, 32, 0.20);
  }

  html[class='figma-dark'] {
    --background-color: rgb(27, 27, 27);
    --text-primary: rgba(255, 255, 255, 1);
    --text-primary-hover: rgba(255, 255, 255, 0.5);
    --text-primary-oncolor: rgba(32, 32, 32, 1);
    --text-secondary: rgba(255, 255, 255, 0.5);
    --text-secondary-hover: rgba(255, 255, 255, 0.8);
    --divider-color: rgba(255, 255, 255, 0.10);
    --border-default: rgba(102, 102, 102, 0.1);
    --border-hover: rgba(255, 255, 255, 0.15);
    --tab-default: rgba(255, 255, 255, 0.04);
    --tab-hover: rgba(255, 255, 255, 0.08);
    --tab-active: rgba(255, 255, 255, 1);
    --tag-default: rgba(255, 255, 255, 0.08);
    --option-default: rgba(255, 255, 255, 0.04);
    --option-hover: rgba(255, 255, 255, 0.08);
    --option-active: rgba(255, 255, 255, 0.1);
    --loader-fill: rgba(255, 255, 255, 0.20);
  }

  /* Utility classes for common patterns */
  .transition-fast { transition: var(--transition-fast); }
  .transition-medium { transition: var(--transition-medium); }
  .transition-slow { transition: var(--transition-slow); }
  
  .hover-scale { transform: scale(1); }
  .hover-scale:hover { transform: scale(1.04); transition: var(--transition-medium); }
  .hover-scale:active { transform: scale(0.99); transition: all 0.01s; }
  
  .interactive-element {
    cursor: pointer;
    transition: var(--transition-fast);
  }
  .interactive-element:hover { transition: var(--transition-fast); }
  .interactive-element:active { transition: all 0.01s; }
  
  .border-interactive {
    border: 1px solid var(--border-default);
    transition: var(--transition-fast);
  }
  .border-interactive:hover { border: 1px solid var(--border-hover); }
  
  .background-interactive {
    background: var(--option-default);
    transition: var(--transition-fast);
  }
  .background-interactive:hover { background: var(--option-hover); }
  .background-interactive:active { background: var(--option-active); }

  /* Override interactive effects for form fields to prevent dropdown issues */
  select.figmate-select {
    background-color: var(--option-default);
    border: 1px solid var(--border-default);
  }
  
  input.figmate-input {
    background: var(--option-default);
    border: 1px solid var(--border-default);
  }
  
  /* Subtle hover effects that don't interfere with dropdown functionality */
  select.figmate-select:hover {
    background-color: var(--option-hover);
    border: 1px solid var(--border-hover);
  }
  
  input.figmate-input:hover {
    background: var(--option-hover);
    border: 1px solid var(--border-hover);
  }
  
  input.figmate-input:focus {
    background: var(--option-default);
    border: 1px solid var(--border-hover);
  }

  body {
    background-color: var(--background-color);
    color: var(--text-secondary);
    margin: 0;
    font-family: "Manrope", Inter, Helvetica, Arial, sans-serif;
    -webkit-user-select: none;
    -ms-user-select: none;
    user-select: none;
    height: 100%;
    display: flex;
    flex-direction: column;
    color-scheme: dark;
    font-size: var(--font-size-sm);
    line-height: 16px;
    font-weight: 400;
    overflow-x: hidden;
    letter-spacing: 0.39px;
  }

  .header {
    display: flex;
    padding: 16px 12px 16px 12px;
    align-items: center;
    justify-content: space-between;
    border-bottom: 1px solid var(--divider-color)
  }

  .header-left {
    display: flex;
    align-items: center;
    gap: 16px;
  }

  .header-right {
    display: flex;
    align-items: center;
  }

  .left-header-container {
    border-radius: 100px;
    border: 1px solid var(--border-default);
    background: url('data:image/png;base64,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') rgba(255, 255, 255, 0.1) 50% / cover no-repeat;
    width: 24px;
    height: 24px;
  }



  .navigation {
    display: flex;
    height: 64px;
    padding: 0px 12px;
    align-items: center;
    gap: 8px;
    flex-shrink: 0;
    overflow-x: scroll;
    scrollbar-width: none;
    /* Firefox */
    -ms-overflow-style: none;
  }

  .navigation::-webkit-scrollbar {
    /* WebKit */
    width: 0;
    height: 0;
  }

  .tabs {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .tab-button {
    display: flex;
    padding: 8px 10px;
    align-items: flex-start;
    border-radius: var(--border-radius-xl);
    background: var(--tab-default);
    color: var(--text-secondary);
    font-weight: 500;
    cursor: pointer;
    transition: var(--transition-fast);
  }

  .tab-button:hover {
    background: var(--tab-hover);
  }

  .tab-button.active {
    color: var(--text-primary-oncolor);
    background: var(--tab-active);
  }

  .content-container {
    display: flex;
    padding: 0px 12px;
    flex-direction: column;
    align-items: stretch;
    flex-shrink: 0;
    align-self: stretch;
    flex: 1;
    overflow: auto;
    padding-bottom: 20px;
  }

  .copy-content-container {
    display: flex;
    padding: 0px 12px;
    flex-direction: column;
    align-items: center;
    flex-shrink: 0;
    align-self: stretch;
    justify-content: space-between;
    flex: 1;
    overflow: auto;
    padding-bottom: 20px;
    text-align: center;
  }

  .about-heading {
    color: var(--text-primary);
    font-size: var(--font-size-md);
    font-weight: 600;
  }

  .about-copy {
    color: var(--text-secondary);
    font-weight: 400;
  }

  .tab-content {
    display: none;
    flex-direction: column;
    align-items: flex-start;
    align-self: stretch;
    gap: 8px;
  }

  .tab-content.active {
    display: flex;
  }

  .footer {
    display: flex;
    padding: 16px 12px 16px 12px;
    align-items: flex-start;
    gap: 12px;
    border-top: 1px solid var(--divider-color);
  }

  .list-view {
    display: flex;
    align-self: stretch;
    flex-direction: column;
    justify-content: flex-start;
    align-items: stretch;
    gap: 8px;
  }

  .grid-container {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 8px;
  }

  .grid-view {
    align-items: center;
    align-self: stretch;
    display: flex;
  }

  .grid-item {
    width: 100%;
    aspect-ratio: 1;
    display: block;
    border-radius: var(--border-radius-sm);
    overflow: hidden;
  }

  .grid-item img {
    max-width: 100%;
    height: 100%;
    cursor: pointer;
    object-fit: cover;
    border-radius: var(--border-radius-sm);
  }

  .loading-indicator {
    display: none;
    z-index: 1000;
    width: 24px;
    height: 24px;
    border: 2px solid var(--loader-fill);
    border-bottom-color: transparent;
    border-radius: 100%;
    align-self: center;
    box-sizing: border-box;
    animation: rotation 0.3s linear infinite;
    margin: auto;
    margin-top: 155px;
  }

  /* Reusable spinner component for buttons */
  .button-spinner {
    display: none;
    width: 16px;
    height: 16px;
    border: 2px solid var(--text-primary-oncolor);
    border-bottom-color: transparent;
    border-radius: 100%;
    box-sizing: border-box;
    animation: rotation 1s linear infinite;
    margin-right: 8px;
    flex-shrink: 0;
  }

  /* Button with spinner layout */
  .button-with-spinner {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
  }

  .button-with-spinner .button-spinner {
    order: -1; /* Spinner appears first (leading position) */
  }

  .button-with-spinner.loading {
    pointer-events: none;
    opacity: 0.7;
  }

  .button-with-spinner.loading .button-spinner {
    display: block;
  }

  @keyframes rotation {
    0% {
      transform: rotate(0deg);
    }

    100% {
      transform: rotate(360deg);
    }
  }

  .title {
    color: var(--text-primary);
    font-family: "Space Grotesk", Inter, Helvetica, Arial, sans-serif;
    font-size: var(--font-size-lg);
    font-style: normal;
    line-height: 24px;
    letter-spacing: -0.6px;
    transition: all 0.2s ease-in;
  }

  .option {
    align-self: stretch;
    display: flex;
    flex-direction: column;
    padding: 10px 12px;
    align-items: flex-start;
    justify-content: center;
    border-radius: var(--border-radius-md);
    transform: scale(1);
    transition: var(--transition-slow);
  }

  .option:hover {
    border-radius: var(--border-radius-lg);
    transform: scale(1.005);
    transition: var(--transition-fast);
  }

  .option:active {
    transform: scale(0.99);
  }

  .option-text {
    flex: 1 1 0;
    color: var(--text-primary);
    font-weight: 500;
  }

  .option-example {
    flex: 1 1 0;
    color: var(--text-secondary);
  }

  .suggested-tag {
    position: absolute;
    padding: 4px 8px;
    background: var(--tag-default);
    border-radius: 24px;
    align-self: self-end;
    font-size: var(--font-size-xs);
    line-height: 12px;
    font-weight: 400;
    color: var(--text-secondary);
  }

  .text-link-primary {
    cursor: pointer;
    color: var(--text-primary);
    font-weight: 500;
    transition: var(--transition-fast);
  }

  .text-link-primary:hover {
    color: var(--text-primary-hover);
  }

  .text-link-secondary {
    cursor: pointer;
    color: var(--text-secondary);
    transition: var(--transition-fast);
  }

  .text-link-secondary:hover {
    color: var(--text-secondary-hover);
  }

  a {
    text-decoration: none;
    color: var(--text-primary);
  }

  #echo-text {
    cursor: pointer;
    position: relative;
  }

  .echo {
    position: absolute;
    animation: fadeOut 2s forwards, scaleEffect 1s forwards;
    opacity: 0;
    font-family: 'Space Grotesk';
    pointer-events: none;
    font-size: var(--font-size-xl);
    white-space: nowrap;
  }

  @keyframes fadeOut {
    0% {
      opacity: 1;
      transform: translateY(0);
    }
    100% {
      opacity: 0;
      transform: translateY(20px);
    }
  }

  @keyframes scaleEffect {
    0% { transform: scale(0.1); }
    15% { transform: scale(0.7); }
    50% { transform: scale(2.3); }
    100% { transform: scale(0); }
  }

  .divider {
    padding-top: 8px;
    display: flex;
    flex-direction: column;
    align-self: stretch;
    justify-items: start;
    gap: 10px;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    font-size: var(--font-size-xs);
    line-height: 12px;
    font-weight: 500;
    color: var(--text-secondary);
  }

  #snackbar {
    display: flex;
    flex-direction: row;
    gap: 8px;
    /* From https://css.glass */
    background: rgba(0, 0, 0, 0.35);
    border-radius: 8px;
    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
    backdrop-filter: blur(14.6px);
    -webkit-backdrop-filter: blur(10.6px);
    border: 0.5px solid rgba(255, 255, 255, 0.1);
    visibility: hidden;
    text-align: left;
    padding: 12px;
    position: fixed;
    z-index: 10000;
    left: 12px;
    right: 12px;
    bottom: 64px;
  }

  /* Show the snackbar when clicking on a button (class added with JavaScript) */
  #snackbar.show {
    visibility: visible;
    animation: fadein 0.5s, fadeout 0.5s 2.5s;
  }

  /* Consolidated animations */
  @keyframes fadein {
    from {
      bottom: 0;
      opacity: 0;
    }
    to {
      bottom: 64px;
      opacity: 1;
    }
  }

  @keyframes fadeout {
    from {
      bottom: 64px;
      opacity: 1;
    }
    to {
      bottom: 0;
      opacity: 0;
    }
  }

  /* Figmate Renaming Section Styles */
  .figmate-field-row {
    display: flex;
    gap: 8px;
    margin: 0;
    width: 100%;
  }

  .figmate-field-group {
    margin: 0;
    width: 100%;
    flex: 1;
  }

  .figmate-select-wrapper {
    position: relative;
    width: 100%;
  }

  .figmate-select-label {
    position: absolute;
    left: 12px;
    top: 50%;
    transform: translateY(-50%);
    pointer-events: none;
    color: var(--text-primary);
    font-weight: 500;
    font-size: var(--font-size-sm);
    line-height: 16px;
    letter-spacing: 0.39px;
  }

  /* Base form field styles */
  .figmate-field-base {
    width: 100%;
    font-family: inherit;
    font-size: var(--font-size-sm);
    line-height: 16px;
    font-weight: 400;
    letter-spacing: 0.39px;
    color: var(--text-secondary);
    border-radius: var(--border-radius-md);
    box-sizing: border-box;
    outline: none;
    transition: var(--transition-fast);
  }

  .figmate-field-base:focus {
    color: var(--text-primary);
  }

  .figmate-select {
    appearance: none;
    padding: 12px 36px 12px 48px;
    cursor: pointer;
    text-align: right;
    background-image: url("data:image/svg+xml,%3Csvg width='8' height='6' viewBox='0 0 8 6' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M3.24407 5.12713C3.64284 5.58759 4.35716 5.58759 4.75593 5.12713L7.76318 1.65465C8.32406 1.00701 7.864 0 7.00725 0H0.992749C0.135997 0 -0.324056 1.00701 0.23682 1.65465L3.24407 5.12713Z' fill='%23999999'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 16px center;
  }

  .figmate-input {
    padding: 12px;
  }

  .figmate-input::placeholder {
    color: var(--text-secondary);
    font-family: inherit;
    font-size: var(--font-size-sm);
    line-height: 16px;
    font-weight: 400;
    letter-spacing: 0.39px;
  }

  .figmate-input:focus::placeholder {
    color: var(--text-secondary);
  }

  /* Input wrapper for clear button functionality */
  .figmate-input-wrapper {
    position: relative;
    width: 100%;
    display: flex;
    align-items: center;
  }

  .figmate-clear-button {
    position: absolute;
    right: 8px;
    top: 50%;
    transform: translateY(-50%);
    background: none;
    border: none;
    cursor: pointer;
    padding: 4px;
    color: var(--text-secondary);
    border-radius: 4px;
    transition: var(--transition-fast);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1;
  }

  .figmate-clear-button:hover {
    color: var(--text-primary);
    background: var(--option-hover);
  }

  .figmate-clear-button:active {
    transform: translateY(-50%) scale(0.95);
  }

  /* Primary Button Styles */
  .figmate-primary-button {
    width: 100%;
    padding: 8px 16px;
    border-radius: var(--border-radius-md);
    border: none;
    background: var(--tab-active);
    color: var(--text-primary-oncolor);
    font-family: inherit;
    font-size: var(--font-size-sm);
    font-weight: 500;
    line-height: 16px;
    letter-spacing: 0.39px;
    cursor: pointer;
    transition: var(--transition-fast);
    outline: none;
  }

  .figmate-primary-button:active {
    transform: scale(0.98);
    transition: all 0.05s;
  }

  .figmate-primary-button:disabled {
    opacity: 0.4;
    cursor: not-allowed;
    transform: none;
  }

  .figmate-primary-button:disabled:hover {
    transform: none;
  }

  .figmate-primary-button:disabled:active {
    transform: none;
  }

  /* Help Modal Styles - Adapted from Sunsetter */
  .help-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.6);
    display: flex;
    align-items: flex-end;
    padding: 4px;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s ease;
    z-index: 1000;
  }

  .help-overlay.visible {
    opacity: 1;
    pointer-events: auto;
  }

  .help-content {
    background: var(--background-color);
    border-radius: var(--border-radius-md);
    padding: 20px;
    width: 100%;
    transform: translateY(100%);
    transition: transform 0.3s ease;
  }

  .help-overlay.visible .help-content {
    transform: translateY(0);
  }

  .help-content h1 {
    font-family: 'Space Grotesk', Inter, Helvetica, Arial, sans-serif;
    font-weight: 600;
    line-height: 20px;
    font-size: 16px;
    letter-spacing: -0.64px;
    margin: 8px 0 12px 0;
    color: var(--text-primary);
  }

  .help-description {
    font-size: var(--font-size-sm);
    line-height: 16px;
    color: var(--text-primary);
    margin: 0 0 12px 0;
    letter-spacing: 0.39px;
  }

  .help-list {
    list-style: none;
    padding: 0;
    margin: 0 0 16px 0;
  }

  .help-list li {
    font-size: var(--font-size-sm);
    line-height: 16px;
    color: var(--text-primary);
    margin-bottom: 12px;
    padding-left: 12px;
    position: relative;
    letter-spacing: 0.39px;
  }

  .help-list li::before {
    content: ">";
    font-weight: bold;
    position: absolute;
    left: 0px;
    color: var(--text-secondary);
  }

  .help-feedback {
    font-size: var(--font-size-sm);
    line-height: 16px;
    color: var(--text-secondary);
    margin: 0 0 24px 0;
    letter-spacing: 0.39px;
  }

  .help-exit {
    font-size: var(--font-size-xs);
    margin: 0;
    cursor: pointer;
    color: var(--text-secondary);
    font-style: normal;
    font-weight: 400;
    text-decoration: none;
    text-align: left;
    transition: var(--transition-fast);
  }

  .help-exit:hover {
    color: var(--text-primary);
  }

  .help-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .help-credit {
    font-size: var(--font-size-xs);
    margin: 0;
    color: var(--text-primary);
    font-style: normal;
    font-weight: 400;
    text-decoration: none;
    text-align: right;
  }

  /* Make beta text clickable */
  .beta-trigger {
    cursor: pointer;
    transition: var(--transition-fast);
  }

  .beta-trigger:hover {
    color: var(--text-primary);
  }
</style>

<body>

  <div class="wrapper">
    <div class="header">
      <div class="header-left">
        <!-- <div class="left-header-container">
        </div> -->
        <div class="title" id="echo-text">figmate</div>
      </div>
      <div class="header-right">
        <span class="beta-trigger" id="beta-help-trigger">About</span>
      </div>
    </div>
    <div class="navigation">
      <div class="tabs" id="tabs">
        <div class="tab-button active" data-tab="case">Tools</div>
        <div class="tab-button" data-tab="text-content">Copy</div>
        <div class="tab-button" data-tab="visual-content">Images</div>
        <div class="tab-button" data-tab="components">Components</div>
      </div>
      <div class="text-link-primary" onclick="showListView()" style="display: none;" id="back-to-list-view">
        ‚Üê Back
      </div>
    </div>
  </div>

  <div class="content-container" id="main-body">
    <div class="tab-content active" id="case">
      <div class="divider">
        Counters
      </div>
      <div class="option interactive-element border-interactive background-interactive" id="char-count">
        <div class="option-text">Char counter</div>
        <div class="option-example">Count of selected text</div>
      </div>
      <div class="option interactive-element border-interactive background-interactive" id="object-count">
        <div class="option-text">Object counter</div>
        <div class="option-example">Count of selected objects</div>
      </div>
      <div class="divider">
        Renaming
      </div>
      
      <!-- Mode and Case Row -->
      <div class="figmate-field-row">
        <!-- Mode Selection -->
        <div class="figmate-field-group">
          <div class="figmate-select-wrapper">
            <span class="figmate-select-label">Mode</span>
            <select id="rename-mode" class="figmate-select figmate-field-base">
              <option value="Text Mode">Text</option>
              <option value="Layer Mode">Layer</option>
            </select>
          </div>
        </div>

        <!-- Case Selection -->
        <div class="figmate-field-group">
          <div class="figmate-select-wrapper">
            <span class="figmate-select-label">Case</span>
            <select id="rename-case" class="figmate-select figmate-field-base">
              <option value="camelCase">camelCase</option>
              <option value="PascalCase">PascalCase</option>
              <option value="snake_case">snake_case</option>
              <option value="kebab-case">kebab-case</option>
              <option value="Train-Case">Train-Case</option>
              <option value="MACRO_CASE">MACRO_CASE</option>
              <option value="Title Case">Title Case</option>
              <option value="Sentence case" selected>Sentence case</option>
              <option value="lower case">lower case</option>
              <option value="UPPER CASE">UPPER CASE</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Prefix and Suffix Row -->
      <div class="figmate-field-row">
        <!-- Match Input (previously Prefix) -->
        <div class="figmate-field-group">
          <div class="figmate-input-wrapper">
            <input type="text" id="rename-match" placeholder="Match (optional)" class="figmate-input figmate-field-base">
            <button type="button" class="figmate-clear-button" onclick="clearInput('rename-match')" style="display: none;">
              <svg width="12" height="12" viewBox="0 0 12 12" fill="none">
                <path d="M9 3L3 9M3 3L9 9" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
              </svg>
            </button>
          </div>
        </div>

        <!-- Rename to Input (previously Suffix) -->
        <div class="figmate-field-group">
          <div class="figmate-input-wrapper">
            <input type="text" id="rename-to" placeholder="Rename to" class="figmate-input figmate-field-base">
            <button type="button" class="figmate-clear-button" onclick="clearInput('rename-to')" style="display: none;">
              <svg width="12" height="12" viewBox="0 0 12 12" fill="none">
                <path d="M9 3L3 9M3 3L9 9" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
              </svg>
            </button>
          </div>
        </div>
      </div>

      <!-- Hint text for name matching -->
      <div style="color: var(--text-secondary); font-size: var(--font-size-xs); line-height: 12px; margin-bottom: 4px; padding: 0 4px;">
        Use $& to reuse current name in rename field
      </div>

      <!-- Apply Button -->
      <button class="figmate-primary-button" id="apply-rename">
        Rename
      </button>

      <div class="divider">
        Layers
      </div>
      <div class="option interactive-element border-interactive background-interactive" id="copy-layer-names">
        <div class="option-text">Copy layer names</div>
        <div class="option-example">Copy selected names separated by new lines</div>
      </div>

    </div>

    <div class="tab-content" id="text-content">
      <div class="option interactive-element border-interactive background-interactive" id="vendor-name">
        <div class="option-text">Vendor names</div>
        <div class="option-example">Burger King, KFC, etc.</div>
      </div>
      <div class="option interactive-element border-interactive background-interactive" id="promo-tags">
        <div class="option-text">Promo tags</div>
        <div class="option-example">30% off, Up to 30% off, etc.</div>
      </div>
      <!-- <div>
        <ul style="padding: 20px; margin: 0px; line-height: 200%; opacity: 0.5;">
          <li>Always use the full 'talabat' name for sub-brands, no abbreviations.</li>
          <li>Use "talabat pro" for the subscription program and "pro" for subscribers.</li>
          <li>Use "talabat pickup" and "talabat rewards" as sub-brand names, but "Pickup" and "Rewards" as features.
          </li>
          <li>Do not capitalize "rewards" in generic sentences.</li>
          <li>Use title case for "Pay Later."</li>
        </ul>
      </div> -->
    </div>

    <div class="tab-content" id="visual-content">
      <div class="divider" id="category-title" style="display: none; padding-bottom: 8px; padding-top: 0px;">

      </div>
      <div class="list-view" id="list-view">
        <a href="#" onclick="showGridView('menu', this)">
          <div class="option interactive-element border-interactive background-interactive">
            <div class="option-text">Menu items</div>
            <div class="option-example">Taken from Burger King</div>
          </div>
        </a>
        <a href="#" onclick="showGridView('product', this)">
          <div class="option interactive-element border-interactive background-interactive">
            <div class="option-text">Quick commerce</div>
            <div class="option-example">Grocery items</div>
          </div>
        </a>
        <a href="#" onclick="showGridView('logos', this)">
          <div class="option interactive-element border-interactive background-interactive">
            <div class="option-text">Logos</div>
            <div class="option-example">Logos from various vendors</div>
          </div>
        </a>

      </div>
      <div id="grid-view" class="grid-view">
        <div id="grid-container" class="grid-container">
          <!-- Images will be dynamically loaded here -->
        </div>
        <div id="loading-indicator" class="loading-indicator">
        </div>
      </div>
    </div>

    <div class="tab-content" id="components">
      <div class="divider">
        Copy Instance Data
      </div>
      
      <!-- Copy Instance Data Button -->
      <button class="figmate-primary-button button-with-spinner" id="copy-instance-data" disabled style="margin-bottom: 0px;">
        <div class="button-spinner"></div>
        Copy Instance Data
      </button>
      
      <!-- Paste Instance Data Button -->
      <button class="figmate-primary-button button-with-spinner" id="paste-instance-data" disabled>
        <div class="button-spinner"></div>
        Paste Instance Data
      </button>
      

      
      <!-- Help text -->
      <div style="color: var(--text-secondary); font-size: var(--font-size-xs); line-height: 12px;">
        Copy from any component instance and paste to another instance of the same component.
      </div>
    </div>

  </div>
  <div class="copy-content-container" id="about-content" style="display: none;">
    <div></div>
    <div
      style="display: flex; flex-direction: column; justify-content: center; align-items: center; gap: 12px; padding-bottom: 56px;">
      <div class="left-header-container" style="height: 48px; width: 48px;"></div>
      <div style="display: flex; flex-direction: column; gap:8px">
        <div class="about-heading">
        Always here to help
      </div>
      <div class="about-copy">DM or tweet at
        <a href="https://x.com/amohgs" target="_blank">
          @amohgs
        </a>
      </div>
      </div>

      
    </div>
    <div class="about-copy">1.5.0-beta</div>
  </div>
  </div>
  <footer class="footer">
    <div class="text-link-secondary" id="insert-meme">Get meme</div>
    <a href="https://docs.google.com/document/d/1-O0Ok7AslwSvIlJmi9g-eHIlFjvRbqgyUthj_5VUeZA/edit#heading=h.rna5p5wafgim"
      target="_blank">
      <div class="text-link-secondary" id="content-guide">Content guide</div>
    </a>
  </footer>

  <div id="snackbar">
  </div>

  <!-- Help Modal -->
  <div class="help-overlay" id="help-overlay">
    <div class="help-content">
      <h1>About figmate</h1>

      <p class="help-description">
        figmate helps you work faster with design content - from text transformations to quick access to realistic images and copy.
      </p>

      <ul class="help-list">
        <li>Use Tools for character counting, object counting, and batch renaming with various case styles.</li>
        <li>Access curated copy content like vendor names and promo tags to make your designs more realistic.</li>
        <li>Browse and insert high-quality images from curated collections to enhance your mockups.</li>
        <li>Drag images directly from the plugin onto your canvas or click to insert at your cursor.</li>
      </ul>

      <p class="help-feedback">
        Have feedback or suggestions? DM or tweet at <a href="https://x.com/amohgs" target="_blank" style="color: var(--text-primary); text-decoration: underline;">@amohgs</a>
      </p>

      <div class="help-footer">
        <p class="help-exit">Exit</p>
        <p class="help-credit">Amogh Srivastava</p>
      </div>
    </div>
  </div>

</body>

<script>

  clickSoundGo(0);

  function clickSoundGo(volume) {
    const clickAudio = new Audio("https://raw.githack.com/amoghsrivastava/figmate/main/assets/click-sound.mp3");
    clickAudio.volume = volume;
    clickAudio.play();
  }


  const optionButton = document.querySelectorAll("div.option");

  optionButton.forEach(button => {
    button.addEventListener("click", () => {
      clickSoundGo(0.1);
    });
  });

  const texts = ["üç≠", "üç≠", "üç≠", "üç≠"];

  const CLIENT_ID = "8b7ac3540d72837";
  const ALBUM_IDS = {
    menu: "H8NtMeN", // DONE
    product: "kB064pE", // DONE
    logos: "vAXMdhL", // DONE
    // branding: "" // Replace with actual album ID
  };

  async function showGridView(category, element) {

    // Display the title in the target div
    const title = element.querySelector('.option-text').innerText;
    document.getElementById('category-title').innerText = title;


    try {
      const albumId = ALBUM_IDS[category];
      if (!albumId) {
        throw new Error("Invalid category");
      }

      // Hide the list view
      document.getElementById("list-view").style.display = "none";

      // Enable the grid view
      const gridView = document.getElementById("grid-view");
      gridView.style.display = "flex";

      // Clear previous grid items
      const gridContainer = document.getElementById("grid-container");
      gridContainer.innerHTML = "";

      // Show loading indicator
      document.getElementById("loading-indicator").style.display = "flex";

      // Fetch images for the selected category
      const images = await fetchImages(albumId);

      // Hide the list view
      document.getElementById("category-title").style.display = "block";

      // Build grid items dynamically
      images.forEach((image) => {
        const gridItem = document.createElement("div");
        gridItem.classList.add("grid-item", "border-interactive", "hover-scale");
        const img = document.createElement("img");
        img.src = image.link;// Assuming each image object has a 'link' property
        img.className = "grid-image-item";
        img.onclick = () => {
          parent.postMessage({ pluginMessage: { type: 'image-click', url: img.src } }, '*');
        };

        img.setAttribute('draggable', 'true');
        // In UI
        img.addEventListener('dragend', e => {
          // Don't proceed if the item was dropped inside the plugin window.
          if (e.view.length === 0) return

          window.parent.postMessage(
            {
              pluginDrop: {
                clientX: e.clientX,
                clientY: e.clientY,
                items: [{ type: 'text/plain', data: img.src }],
              }
            },
            '*'
          )
        });

        gridItem.appendChild(img);
        gridContainer.appendChild(gridItem);
      });

      console.log('fetched');

      // Hide tabs and show the back button
      document.getElementById("tabs").style.display = "none";
      document.getElementById("back-to-list-view").style.display = "block";

    } catch (error) {
      console.error("Error displaying grid view:", error);
    } finally {
      // Always hide loading indicator regardless of success or failure
      document.getElementById("loading-indicator").style.display = "none";
    }
  }



  function showListView() {
    // Hide the grid view
    document.getElementById("grid-view").style.display = "none";
    document.getElementById("tabs").style.display = "flex";
    // Show the list view
    document.getElementById("list-view").style.display = "flex";
    document.getElementById("back-to-list-view").style.display = "none";
    // Hide the list view
    document.getElementById("category-title").style.display = "none";
    document.getElementById("main-body").style.display = "flex";
  }

  async function fetchImages(albumId) {
    try {
      const response = await fetch(
        `https://api.imgur.com/3//album/${albumId}/images`,
        {
          headers: {
            Authorization: `Client-ID ${CLIENT_ID}`,
          },
        }
      );
      if (!response.ok) {
        throw new Error("Failed to fetch images");
      }
      const data = await response.json();
      return data.data; // Array of image objects
    } catch (error) {
      console.error("Error fetching images:", error);
      return [];
    }
  }


  document.addEventListener("DOMContentLoaded", function () {
    const tabButtons = document.querySelectorAll(".tab-button");
    const tabContents = document.querySelectorAll(".tab-content");

    tabButtons.forEach((button) => {
      button.addEventListener("click", () => {
        const tab = button.getAttribute("data-tab");

        // Remove active class from all buttons and contents
        tabButtons.forEach((btn) => btn.classList.remove("active"));
        tabContents.forEach((content) => content.classList.remove("active"));

        // Add active class to the clicked button and corresponding content
        button.classList.add("active");
        document.getElementById(tab).classList.add("active");
      });
    });
  });

  document
    .getElementById("vendor-name")
    .addEventListener("click", vendorNameData, false);

  function vendorNameData() {
    parent.postMessage({ pluginMessage: { type: "vendor-name-data" } }, "*");
  }

  const options = document.querySelectorAll(".option");

  options.forEach((option) => {
    option.onclick = () => {
      // Handle all options with the existing logic
      parent.postMessage({ pluginMessage: { type: option.id } }, "*");
    };
  });

  // Handle the primary button separately
  document.getElementById("apply-rename").onclick = () => {
    clickSoundGo(0.1);
    handleRenameSubmit();
  };

  // Handle Components tab buttons
  const copyButton = document.getElementById("copy-instance-data");
  const pasteButton = document.getElementById("paste-instance-data");
  
  if (copyButton) {
    copyButton.onclick = () => {
      clickSoundGo(0.1);
      console.log('Copy button clicked');
      parent.postMessage({ pluginMessage: { type: 'copy-instance-data' } }, '*');
    };
  }

  if (pasteButton) {
    pasteButton.onclick = () => {
      clickSoundGo(0.1);
      console.log('Paste button clicked');
      parent.postMessage({ pluginMessage: { type: 'paste-instance-data' } }, '*');
    };
  }



  function handleRenameSubmit() {
    const mode = document.getElementById('rename-mode').value;
    const caseStyle = document.getElementById('rename-case').value;
    const matchPattern = document.getElementById('rename-match').value;
    const renameTo = document.getElementById('rename-to').value;

    parent.postMessage({
      pluginMessage: {
        type: 'rename-apply',
        mode: mode,
        caseStyle: caseStyle,
        matchPattern: matchPattern,
        renameTo: renameTo
      }
    }, '*');
  }

  document.getElementById("insert-meme").addEventListener("click", () => {
    parent.postMessage({ pluginMessage: { type: "addMeme" } }, "*");
  });

  onmessage = (event) => {
    const message = event.data.pluginMessage;

    if (message.type === "no-selection") {
      alert("Please select a text box on the canvas.");
    }

    if (message.type === "copy-to-clipboard") {
      // Use the modern clipboard API to copy text
      if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(message.content).then(() => {
          console.log('Text copied to clipboard successfully');
        }).catch(err => {
          console.error('Failed to copy text to clipboard:', err);
          // Fallback to the older method if modern clipboard API fails
          fallbackCopyToClipboard(message.content);
        });
      } else {
        // Fallback for browsers that don't support the modern clipboard API
        fallbackCopyToClipboard(message.content);
      }
    }

    if (message.type === "operation-started") {
      // Operation has started - ensure spinner is visible
      const copyButton = document.getElementById("copy-instance-data");
      const pasteButton = document.getElementById("paste-instance-data");
      
      if (message.operation === 'copy') {
        copyButton.classList.add('loading');
        copyButton.disabled = true;
      } else if (message.operation === 'paste') {
        pasteButton.classList.add('loading');
        pasteButton.disabled = true;
      }
    }

    if (message.type === "operation-progress") {
      // Operation progress update - could be used for more detailed feedback
      console.log(`${message.operation} progress:`, message.message);
    }

    if (message.type === "update-component-buttons") {
      // Update button states based on selection
      const copyButton = document.getElementById("copy-instance-data");
      const pasteButton = document.getElementById("paste-instance-data");
      
      console.log('UI button update:', message);
      
      // Clear loading states
      copyButton.classList.remove('loading');
      pasteButton.classList.remove('loading');
      
      copyButton.disabled = !message.canCopy;
      pasteButton.disabled = !message.canPaste;
    }
  };

  // Fallback function for copying to clipboard
  function fallbackCopyToClipboard(text) {
    const textArea = document.createElement('textarea');
    textArea.value = text;
    textArea.style.position = 'fixed';
    textArea.style.left = '-999999px';
    textArea.style.top = '-999999px';
    document.body.appendChild(textArea);
    textArea.focus();
    textArea.select();
    
    try {
      document.execCommand('copy');
      console.log('Text copied using fallback method');
    } catch (err) {
      console.error('Fallback copy method failed:', err);
    }
    
    document.body.removeChild(textArea);
  }

  document.getElementById('echo-text').addEventListener('click', function (e) {
    texts.forEach((text, index) => {
      for (let i = 0; i < 10; i++) { // Adjust the number of echoes per text if needed
        createEcho(text, i * 30 + index * 150); // Stagger the start times to make the effect more dynamic
      }
    });
  });

  function createEcho(text, delay) {
    const echo = document.createElement('div');
    echo.innerText = text;
    echo.className = 'echo';
    echo.style.left = `${Math.random() * 100}%`;
    echo.style.top = `${Math.random() * 100}%`;
    echo.style.animationDelay = `${delay}ms`;
    document.body.appendChild(echo);

    setTimeout(() => {
      echo.remove();
    }, 1000 + delay);
  }

  function showSnackbar(content) {
    // Get the snackbar DIV
    var x = document.getElementById("snackbar");

    x.innerHTML = content;
    // Add the "show" class to DIV
    x.className = "show";


    // After 3 seconds, remove the show class from DIV
    setTimeout(function () { x.className = x.className.replace("show", ""); }, 3000);
  }

  // Clear input functionality
  function clearInput(inputId) {
    const input = document.getElementById(inputId);
    input.value = '';
    input.focus();
    toggleClearButton(inputId);
  }

  // Toggle clear button visibility based on input content
  function toggleClearButton(inputId) {
    const input = document.getElementById(inputId);
    const clearButton = input.parentElement.querySelector('.figmate-clear-button');
    if (input.value.length > 0) {
      clearButton.style.display = 'flex';
    } else {
      clearButton.style.display = 'none';
    }
  }

  // Add event listeners for prefix and suffix inputs
  document.addEventListener('DOMContentLoaded', function() {
    const prefixInput = document.getElementById('rename-match');
    const suffixInput = document.getElementById('rename-to');

    // Add input event listeners to show/hide clear buttons
    prefixInput.addEventListener('input', () => toggleClearButton('rename-match'));
    suffixInput.addEventListener('input', () => toggleClearButton('rename-to'));

    // Add keyup listeners for better responsiveness
    prefixInput.addEventListener('keyup', () => toggleClearButton('rename-match'));
    suffixInput.addEventListener('keyup', () => toggleClearButton('rename-to'));
  });

  // onmessage = (event) => {
  //   if (true) {
  //     document.getElementById("char-count-result").style.display = "flex";
  //     charCount = event.data.pluginMessage + ' characters';
  //     document.getElementById("char-count-result").innerText = charCount;
  //   }
  // }

  // Help Modal Functionality
  document.addEventListener('DOMContentLoaded', function() {
    // Get elements
    const betaTrigger = document.getElementById('beta-help-trigger');
    const helpOverlay = document.getElementById('help-overlay');
    const helpContent = document.querySelector('.help-content');
    const exitHelp = document.querySelector('.help-exit');

    // Show help overlay when clicking "in beta"
    betaTrigger.addEventListener('click', (e) => {
      e.preventDefault();
      helpOverlay.classList.add('visible');
      clickSoundGo(0.1);
    });

    // Hide help overlay when clicking on the overlay background
    helpOverlay.addEventListener('click', (e) => {
      if (e.target === helpOverlay) {
        helpOverlay.classList.remove('visible');
      }
    });

    // Hide help overlay when clicking on "Exit help"
    exitHelp.addEventListener('click', () => {
      helpOverlay.classList.remove('visible');
      clickSoundGo(0.1);
    });

    // Prevent clicks on the content from closing the modal
    helpContent.addEventListener('click', (e) => {
      e.stopPropagation();
    });

    // Close modal with Escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && helpOverlay.classList.contains('visible')) {
        helpOverlay.classList.remove('visible');
      }
    });
  });

</script>